<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agregar Usuario</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }

      form {
        max-width: 400px;
        margin: auto;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        background-color: #f9f9f9;
      }

      h2 {
        text-align: center;
      }

      input[type="text"],
      input[type="number"],
      input[type="date"],
      input[type="time"] {
        width: 100%;
        padding: 8px;
        margin: 5px 0 15px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }

      button {
        width: 100%;
        padding: 10px;
        background-color: #28a745;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      button:hover {
        background-color: #218838;
      }

      .msg {
        text-align: center;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <h2>Agregar Usuario</h2>

    <form id="userForm">
      <label for="nombre">Nombre:</label>
      <input type="text" id="nombre" name="nombre" required />

      <label for="apellido">Apellido:</label>
      <input type="text" id="apellido" name="apellido" required />

      <label for="fecha_entrada">Fecha de Entrada:</label>
      <input type="date" id="fecha_entrada" name="fecha_entrada" required />

      <label for="fecha_salida">Fecha de Salida:</label>
      <input type="date" id="fecha_salida" name="fecha_salida" required />

      <label for="hora_entrada">Hora de Entrada (Por defecto 16:00):</label>
      <input type="time" id="hora_entrada" name="hora_entrada" value="16:00" />

      <label for="hora_salida">Hora de Salida (Por defecto 12:00):</label>
      <input type="time" id="hora_salida" name="hora_salida" value="12:00" />

      <label for="intentos">Intentos:</label>
      <input type="number" id="intentos" name="intentos" required min="1" value="5" />

      <button type="submit">Agregar Usuario</button>
    </form>

    <div class="msg" id="msg"></div>

    <script>
      document
        .getElementById("userForm")
        .addEventListener("submit", async function (event) {
          event.preventDefault();

          const nombre = document.getElementById("nombre").value;
          const apellido = document.getElementById("apellido").value;
          const fecha_entrada = document.getElementById("fecha_entrada").value;
          const fecha_salida = document.getElementById("fecha_salida").value;
          const hora_entrada =
            document.getElementById("hora_entrada").value || "16:00";
          const hora_salida =
            document.getElementById("hora_salida").value || "12:00";
          const intentos = document.getElementById("intentos").value || 5;

          const user = {
            nombre,
            apellido,
            fecha_entrada,
            fecha_salida,
            intentos,
            hora_entrada,
            hora_salida,
          };

          try {
            const response = await fetch("http://localhost:8080/usuario", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(user),
            });

            if (response.ok) {
              document.getElementById("msg").textContent =
                "Usuario agregado exitosamente";
              document.getElementById("userForm").reset();
            } else {
              document.getElementById("msg").textContent =
                "Error al agregar el usuario";
            }
          } catch (error) {
            document.getElementById("msg").textContent = "Error de conexi√≥n";
          }
        });
    </script>
  </body>
</html>
